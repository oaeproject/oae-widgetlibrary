<div id="widget_list_container">
<% if @widgets.size > 0 %>
  <div id="widget_list_header">
    <div id="widget_list_sort_by">
        <label for="sort_by">Sort by</label>
        <select id="sort_by">
          <option data-sortby="average_rating" data-direction="desc" <% if params[:s].eql?("average_rating") && params[:d].eql?("desc") %>selected<% end %>>Highest Rated</option>
          <option data-sortby="average_rating" data-direction="asc" <% if params[:s].eql?("average_rating") && params[:d].eql?("asc") %>selected<% end %>>Lowest Rated</option>
          <option data-sortby="popularity" data-direction="desc" <% if params[:s].eql? "popularity" %>selected<% end %>>Most Popular</option>
          <option data-sortby="title" data-direction="asc" <% if params[:s].eql?("title") && params[:d].eql?("asc") %>selected<% end %>>A-Z</option>
          <option data-sortby="title" data-direction="desc" <% if params[:s].eql?("title") && params[:d].eql?("desc") %>selected<% end %>>Z-A</option>
        </select>
    </div>
    <div id="widget_list_count"><%= page_entries_info @widgets %></div>
  </div>
  <div id="widget_list">
    <%= render :partial => "core/widget", :locals => {:display => {:rating => true, :author => true, :num_ratings => true, :status => false, :title_length => "medium"}}, :collection => @widgets %>
    <hr class="wl-push wl-hidden"/>
    <%= will_paginate @widgets %>
  </div>
<% else %>
  <%= render :partial => "core/noresults", :locals => noresults %>
<% end %>
</div>